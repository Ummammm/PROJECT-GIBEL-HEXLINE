<!DOCTYPE html>
<html lang="en" class="bg-black text-white font-sans">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dropcrates - Hexline</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['IBM Plex Sans', 'sans-serif']
          },
          colors: {
            neonGreen: '#00FFAA',
            cyberPink: '#FF2C79',
            bitcoinPink: '#FF00FF',
            darkGray: '#1A1A1A',
            cyberBlack: '#0a0a0a',
            cyberBlue: '#00BFFF',
            glowWhite: '#f0f0f0'
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-in forwards',
            'fade-out': 'fadeOut 0.2s ease-out forwards',
            'stagger-in': 'staggerIn 0.3s ease-out both'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: 0, transform: 'translateY(10px)' },
              '100%': { opacity: 1, transform: 'translateY(0)' },
            },
            fadeOut: {
              '0%': { opacity: 1 },
              '100%': { opacity: 0 },
            },
            staggerIn: {
              from: { opacity: 0, transform: 'scale(0.95)' },
              to: { opacity: 1, transform: 'scale(1)' }
            }
          },
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'IBM Plex Sans', sans-serif;
      color: white;
      position: relative;
      z-index: 0;
    }

    body::before {
      content: "";
      background-image: url('assets/placeholder/cyberpunk-bitcoin-illustration (1).jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      position: fixed;
      inset: 0;
      opacity: 0.1;
      /* change this as needed */
      z-index: -1;
    }
  </style>
</head>

<body class="min-h-screen bg-[url('/path/to/bg.jpg')] bg-cover bg-no-repeat">

  <!-- ðŸ§­ NAVBAR -->
  <header class="w-full flex justify-between items-center px-6 py-4 border-b border-neonGreen">
    <div class="text-3xl font-extrabold text-neonGreen">HEXLINE</div>
    <nav class="flex gap-6 text-sm uppercase">
      <a href="#" class="hover:text-neonGreen">Stockpile</a>
      <a href="#" class="hover:text-neonGreen">Most Wanted</a>
      <a href="#" class="hover:text-neonGreen">Just Smuggled</a>
      <a href="loadbayxiii.html" class="hover:text-neonGreen">Loadbay XIII</a>
      <a href="dropcrates.html" class="text-neonGreen font-bold border border-neonGreen px-2">Dropcrates</a>
    </nav>
    <div class="flex gap-4">
      <a href="stash.html"
        class="border border-neonGreen px-3 py-1 text-neonGreen hover:bg-neonGreen hover:text-black transition">STASH <span id="stash-count" class="text-xs">0</span></a>
      <a href="linkin.html" class="border border-white px-3 py-1 hover:bg-white hover:text-black">LINK IN</button>
    </div>
  </header>

  <!-- ðŸ§± PAGE TITLE -->
  <section class="text-center py-10">
    <h1 class="text-5xl font-extrabold text-neonGreen">DROPCRATES</h1>
    <p class="text-sm text-gray-400 mt-2 uppercase tracking-widest">Gear up. Get gone. No trail.</p>
  </section>

  <!-- ðŸŽ´ GRID CONTAINER -->
  <section class="px-8 pb-20 max-w-7xl mx-auto">
    <div id="crate-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>

  </section>

  <!-- ðŸ”® MODAL (for future use) -->
  <div id="crateModal"
    class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center p-4 overflow-y-auto">
    <div class="bg-neutral-900 border border-neonGreen rounded-xl w-full max-w-3xl p-6 relative">
      <button onclick="closeModal()"
        class="absolute top-2 right-2 text-neonGreen hover:text-white text-lg">&times;</button>
      <div id="modal-content" class="text-gray-200"></div>
    </div>
  </div>


</body>

<script>
  async function loadDropcrates() {
    try {
      const response = await fetch('data/dropcrates.json');
      const crates = await response.json();
      renderDropcrates(crates);
    } catch (err) {
      console.error("Failed to load crates:", err);
    }
  }

  function renderDropcrates(crates) {
    const container = document.getElementById('crate-grid');
    container.innerHTML = '';

    crates.forEach(crate => {
      const card = document.createElement('div');
      card.className = `bg-black/40 border border-neonGreen p-4 rounded-xl hover:bg-black/60 transition cursor-pointer group`;
      card.onclick = () => openModal(crate);
      card.innerHTML = `
          <img src="${crate.image}" alt="${crate.name}" class="w-24 h-24 object-contain mx-auto mb-4" />
          <h3 class="text-neonGreen font-bold text-lg text-center mb-1">${crate.name}</h3>
          <p class="text-sm text-center text-glowWhite mb-3">${crate.description}</p>
          <div class="flex justify-between items-center text-xs text-gray-300">
            <span class="bg-yellow-400 text-black px-2 py-0.5 rounded">${crate.rating} â˜…</span>
            <span class="bg-pink-500 px-2 py-0.5 rounded">${crate.stock} in stock</span>
          </div>
        `;
      container.appendChild(card);
    });
  }

  function openModal(crate) {
    const modal = document.getElementById('crateModal');
    const content = document.getElementById('modal-content');

    content.innerHTML = `
    <div class="flex flex-col md:flex-row gap-6">
      <!-- Image Section -->
      <div class="md:w-1/3 w-full flex justify-center items-start">
        <img src="${crate.image}" alt="${crate.name}" class="w-80 h-80 object-contain" />
      </div>

      <!-- Info Section -->
      <div class="flex-1 space-y-4">
        <h2 class="text-2xl font-bold text-neonGreen">${crate.name}</h2>
        <p class="text-sm italic text-gray-300">"${crate.description}"</p>

        <ul class="list-disc list-inside text-sm text-glowWhite space-y-1">
          ${crate.contents.map(item => `<li>${item}</li>`).join('')}
        </ul>

        <div class="flex gap-4 text-xs">
          <span class="bg-yellow-400 text-black px-3 py-1 rounded">${crate.rating} â˜…</span>
          <span class="bg-pink-500 px-3 py-1 rounded">${crate.stock} in stock</span>
        </div>

        <button id="modal-stash-button" class="w-full bg-neonGreen text-black py-2 rounded font-bold hover:bg-opacity-90 transition">
          PUT TO STASH
        </button>
      </div>
    </div>
  `;

    // Add event listener to the stash button
    setTimeout(() => {
      const stashButton = document.getElementById('modal-stash-button');
      if (stashButton) {
        stashButton.onclick = () => addToStash(crate);
      }
    }, 100);

    modal.classList.remove('hidden');
    modal.classList.add('flex');
  }


  function closeModal() {
    const modal = document.getElementById('crateModal');
    modal.classList.remove('flex');
    modal.classList.add('hidden');
  }

  function addToStash(crate) {
    const stash = JSON.parse(localStorage.getItem('hexline-stash')) || [];

    // Check if item is already in stash
    const existing = stash.find(i => i.name === crate.name);
    if (existing) {
      existing.quantity += 1;
    } else {
      // Create a stash item with the crate data
      const stashItem = {
        name: crate.name,
        image: crate.image,
        price: 0, // Crates don't have individual prices, they're bundles
        quantity: 1,
        description: crate.description,
        contents: crate.contents,
        rating: crate.rating,
        stock: crate.stock
      };
      stash.push(stashItem);
    }

    localStorage.setItem('hexline-stash', JSON.stringify(stash));
    updateStashCount();
    
    // Show success message
    const message = document.createElement('div');
    message.className = 'fixed top-4 right-4 bg-neonGreen text-black px-4 py-2 rounded-lg z-50 animate-fade-in';
    message.textContent = `${crate.name} added to stash!`;
    document.body.appendChild(message);
    
    setTimeout(() => {
      message.remove();
    }, 3000);
    
    closeModal();
  }

  function updateStashCount() {
    const stash = JSON.parse(localStorage.getItem('hexline-stash')) || [];
    const total = stash.reduce((sum, item) => sum + item.quantity, 0);
    const stashCountElement = document.getElementById('stash-count');
    if (stashCountElement) {
      stashCountElement.textContent = total;
    }
  }

  window.onload = function() {
    loadDropcrates();
    updateStashCount();
  };
</script>


</html>