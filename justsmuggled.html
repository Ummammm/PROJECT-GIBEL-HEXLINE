<!DOCTYPE html>
<html lang="en" class="bg-black text-white font-mono">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HEXLINE | Just Smuggled</title>
   <!-- Google Font -->
   <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600&display=swap" rel="stylesheet" />

   <!-- Tailwind CDN -->
   <script src="https://cdn.tailwindcss.com"></script>
   <script>
     tailwind.config = {
       theme: {
         extend: {
           fontFamily: {
             sans: ['IBM Plex Sans', 'sans-serif']
           },
           colors: {
             neonGreen: '#00FFAA',
             cyberPink: '#FF2C79',
             bitcoinPink: '#FF00FF',
             darkGray: '#1A1A1A',
             cyberBlack: '#0a0a0a',
             cyberBlue: '#00BFFF',
             glowWhite: '#f0f0f0'
           },
           animation: {
             'fade-in': 'fadeIn 0.3s ease-in forwards',
             'fade-out': 'fadeOut 0.2s ease-out forwards',
             'stagger-in': 'staggerIn 0.3s ease-out both'
           },
           keyframes: {
             fadeIn: {
               '0%': { opacity: 0, transform: 'translateY(10px)' },
               '100%': { opacity: 1, transform: 'translateY(0)' },
             },
             fadeOut: {
               '0%': { opacity: 1 },
               '100%': { opacity: 0 },
             },
             staggerIn: {
               from: { opacity: 0, transform: 'scale(0.95)' },
               to: { opacity: 1, transform: 'scale(1)' }
             }
           },
         }
       }
     }
   </script>
   <style>
     body {
       font-family: 'IBM Plex Sans', sans-serif;
       color: white;
       position: relative;
       z-index: 0;
     }
 
     body::before {
       content: "";
       background-image: url('assets/placeholder/cyberpunk-bitcoin-illustration (1).jpg');
       background-size: cover;
       background-position: center;
       background-repeat: no-repeat;
       position: fixed;
       inset: 0;
       opacity: 0.1;
       /* change this as needed */
       z-index: -1;
     }
 
     @keyframes fadeIn {
       from {
         opacity: 0;
         transform: scale(0.95);
       }
 
       to {
         opacity: 1;
         transform: scale(1);
       }
     }
 
     .animate-fadeIn {
       animation: fadeIn 0.3s ease-out;
     }
 
     .item {
       transition: all 0.3s ease;
       opacity: 1;
       transform: scale(1);
     }
 
     .item.fade-out {
       opacity: 0;
       transform: scale(0.95);
       pointer-events: none;
     }
 
     .item.fade-in {
       opacity: 1;
       transform: scale(1);
     }

     /* Modal styles */
     .modal {
       display: none;
       position: fixed;
       z-index: 1000;
       left: 0;
       top: 0;
       width: 100%;
       height: 100%;
       background-color: rgba(0, 0, 0, 0.8);
       backdrop-filter: blur(5px);
     }

     .modal.show {
       display: flex;
       align-items: center;
       justify-content: center;
       animation: fadeIn 0.3s ease-out;
     }

     .modal-content {
       background: linear-gradient(135deg, #0F0F0F 0%, #1A1A1A 100%);
       border: 2px solid #00FFAA;
       border-radius: 15px;
       padding: 30px;
       max-width: 600px;
       width: 90%;
       max-height: 80vh;
       overflow-y: auto;
       position: relative;
       animation: fadeIn 0.3s ease-out;
     }

     .close {
       position: absolute;
       top: 15px;
       right: 20px;
       color: #00FFAA;
       font-size: 28px;
       font-weight: bold;
       cursor: pointer;
       transition: color 0.3s ease;
     }

     .close:hover {
       color: #fff;
     }

     .modal-header {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 20px;
       padding-bottom: 15px;
       border-bottom: 1px solid #333;
     }

     .modal-image {
       width: 200px;
       height: 200px;
       object-fit: contain;
       margin: 0 auto 20px;
       display: block;
       border-radius: 10px;
       background: rgba(0, 255, 170, 0.1);
       padding: 10px;
     }

     .modal-description {
       background: rgba(0, 0, 0, 0.3);
       padding: 15px;
       border-radius: 8px;
       margin: 15px 0;
       border-left: 3px solid #00FFAA;
     }
   </style>
</head>
<body class="p-8">
<!-- NAVBAR -->
  <nav class="flex items-center justify-between px-6 py-4 border-b border-neonGreen bg-black bg-opacity-80">
    <h1 class="text-5xl font-bold text-neonGreen">HEXLINE</h1>
    <ul class="flex gap-6 text-sm font-bold ">
      <li><a href="main.html" class="hover:text-neonGreen transition text-xl">STOCKPILE</a></li>
      <li><a href="mostwanted.html" class="hover:text-neonGreen transition text-xl">MOST WANTED</a></li>
      <li><a href="justsmuggled.html" class="border px-2 py-1 border-neonGreen text-neonGreen text-xl">JUST SMUGGLED</a></li>
      <li><a href="loadbayxiii.html" class="hover:text-neonGreen transition text-xl">LOADBAY XIII</a></li>
      <li><a href="dropcrates.html" class="hover:text-neonGreen transition text-xl">DROPCRATES</a></li>
    </ul>
    <div class="flex gap-4">
      <a href="stash.html"
        class="border border-neonGreen px-3 py-1 text-sm hover:bg-neonGreen hover:text-black transition text-xl">STASH</a>
      <a href="linkin.html"
        class="border border-neonGreen px-3 py-1 text-sm hover:bg-neonGreen hover:text-black transition text-xl">LINK
        IN</a>
    </div>
  </nav>
  <!-- JUST SMUGGLED Section -->
  <section class="mb-20" id="justSmuggledSection">
    <!-- Content will be rendered by JavaScript -->
  </section>

  <!-- NEW SIGNAL Section -->
  <section id="newSignalSection">
    <!-- Content will be rendered by JavaScript -->
  </section>

  <!-- Modal -->
  <div id="itemModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      
      <div class="modal-header">
        <div>
          <span class="text-yellow-400 text-sm" id="modalRating">4.9/5.0</span>
          <h2 class="text-2xl font-bold text-white" id="modalTitle">ITEM NAME</h2>
          <span class="text-pink-400 text-sm" id="modalScore">91/100</span>
        </div>
      </div>

      <img id="modalImage" class="modal-image" src="" alt="Item Image">
      
      <div class="modal-description">
        <h3 class="text-lg font-semibold text-neonGreen mb-2">ITEM DESCRIPTION:</h3>
        <p id="modalDescription" class="text-sm text-gray-300 leading-relaxed"></p>
      </div>

      <div class="flex justify-between items-center mt-6">
        <div class="text-2xl font-bold text-white" id="modalPrice">100 U</div>
        <button id="modalButton" class="bg-neonGreen hover:bg-green-400 text-black px-6 py-3 rounded-lg font-semibold transition-colors duration-300">PUT TO STASH</button>
      </div>
    </div>
  </div>

  <!-- Data Loading and Rendering Script -->
  <script>
    // Load and render data from JSON file
    async function loadAndRenderData() {
      try {
        const response = await fetch('data/justsmuggled.json');
        const data = await response.json();
        
        renderJustSmuggledSection(data.justSmuggled);
        renderNewSignalSection(data.newSignal);
      } catch (error) {
        console.error('Error loading data:', error);
      }
    }

    function renderJustSmuggledSection(sectionData) {
      const section = document.getElementById('justSmuggledSection');
      if (!section) return;

      // Helper to escape single quotes for JS string literals
      const escape = str => str.replace(/'/g, "\\'");

      section.innerHTML = `
        <h1 class="text-center text-4xl font-bold text-neonGreen mb-2 p-6">${escape(sectionData.title)}</h1>
        <p class="text-center text-lg text-glowWhite mb-8">${escape(sectionData.subtitle)}</p>
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6">
          ${sectionData.items.map(item => `
            <div class="bg-[#0F0F0F] border border-green-600 p-4 rounded-xl flex flex-col items-center cursor-pointer hover:border-green-400 transition-all duration-300" onclick="openModal('${escape(item.image)}', '${escape(item.name)}', '${escape(item.description)}', '${escape(item.price)}', ${item.available})">
              <img src="${item.image}" alt="${escape(item.name)}" class="w-24 h-24 mb-4">
              <h3 class="text-sm font-semibold mb-1">${escape(item.name)}</h3>
              <p class="text-sm text-green-400 mb-3">${escape(item.price)}</p>
              <button class="bg-green-600 hover:bg-green-500 text-black px-3 py-1 rounded">PUT TO STASH</button>
            </div>
          `).join('')}
        </div>
      `;
    }

    function renderNewSignalSection(sectionData) {
      const section = document.getElementById('newSignalSection');
      if (!section) return;

      const escape = str => str.replace(/'/g, "\\'");

      section.innerHTML = `
        <h1 class="text-center text-4xl font-bold text-neonGreen mb-2">${escape(sectionData.title)}</h1>
        <p class="text-center text-lg text-gray-400 mb-8">${escape(sectionData.subtitle)}</p>
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6">
          ${sectionData.items.map(item => `
            <div class="bg-[#0F0F0F] border border-cyan-500 p-4 rounded-xl flex flex-col items-center cursor-pointer hover:border-cyan-400 transition-all duration-300" onclick="openModal('${escape(item.image)}', '${escape(item.name)}', '${escape(item.description)}', '${escape(item.price)}', ${item.available})">
              <img src="${item.image}" alt="${escape(item.name)}" class="w-24 h-24 mb-4">
              <h3 class="text-sm font-semibold mb-1">${escape(item.name)}</h3>
              <p class="text-xs text-yellow-300 mb-3">Arrive in: <span class="countdown" data-time="${item.arrivalTime}">${formatTime(item.arrivalTime)}</span></p>
            </div>
          `).join('')}
        </div>
      `;
    }

    // Load data when page loads
    document.addEventListener('DOMContentLoaded', loadAndRenderData);

    // Countdown Script
    function formatTime(seconds) {
      const d = Math.floor(seconds / 86400);
      const h = Math.floor((seconds % 86400) / 3600);
      const m = Math.floor((seconds % 3600) / 60);
      const s = seconds % 60;

      if (d > 0) return `${d} Day${d > 1 ? 's' : ''}`;
      if (h > 0) return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
      return `${m}:${s.toString().padStart(2, '0')}`;
    }

    function updateCountdowns() {
      document.querySelectorAll('.countdown').forEach(el => {
        const timeLeft = parseInt(el.dataset.time);
        if (timeLeft > 0) {
          el.dataset.time = timeLeft - 1;
          el.textContent = formatTime(timeLeft - 1);
        } else {
          el.textContent = "Arrived";
          el.classList.add("text-green-500");
        }
      });
    }

    setInterval(updateCountdowns, 1000);

    // Modal functions
    function openModal(imageSrc, title, description, price, available) {
      const modal = document.getElementById('itemModal');
      const modalImage = document.getElementById('modalImage');
      const modalTitle = document.getElementById('modalTitle');
      const modalDescription = document.getElementById('modalDescription');
      const modalPrice = document.getElementById('modalPrice');
      const modalButton = document.getElementById('modalButton');

      // Use the imageSrc directly since it's now a full path from the JSON
      modalImage.src = imageSrc;
      modalTitle.textContent = title;
      modalDescription.textContent = description;
      modalPrice.textContent = price;

      if (available) {
        modalButton.textContent = 'PUT TO STASH';
        modalButton.className = 'bg-neonGreen hover:bg-green-400 text-black px-6 py-3 rounded-lg font-semibold transition-colors duration-300';
        modalButton.onclick = function() {
          // Add to stash functionality
          let stash = JSON.parse(localStorage.getItem('hexline-stash')) || [];
          const priceValue = parseInt(price.replace(' u', ''));
          const found = stash.find(item => item.name === title);
          if (found) {
            found.quantity += 1;
          } else {
            stash.push({
              name: title,
              image: imageSrc,
              price: priceValue,
              quantity: 1
            });
          }
          localStorage.setItem('hexline-stash', JSON.stringify(stash));
          // Show confirmation message
          const msg = document.createElement('div');
          msg.className = 'fixed top-4 right-4 bg-neonGreen text-black px-4 py-2 rounded-lg z-50 animate-fade-in';
          msg.textContent = `${title} added to stash!`;
          document.body.appendChild(msg);
          setTimeout(() => msg.remove(), 2000);
          closeModal();
        };
      } else {
        modalButton.textContent = 'NOT AVAILABLE';
        modalButton.className = 'bg-gray-600 text-gray-300 px-6 py-3 rounded-lg font-semibold cursor-not-allowed';
        modalButton.onclick = null;
      }

      modal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      const modal = document.getElementById('itemModal');
      modal.classList.remove('show');
      document.body.style.overflow = 'auto';
    }

    // Close modal when clicking outside
    document.getElementById('itemModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
  </script>
</body>
</html>
